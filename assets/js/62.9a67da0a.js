(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{453:function(a,e,t){"use strict";t.r(e);var n=t(9),i=Object(n.a)({},(function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("p",[a._v("In this article, we are going to see how to install buildah and podman and replace docker")]),a._v(" "),t("p",[a._v("buildah is a command-line tool that facilitates building OCI compliant images.")]),a._v(" "),t("p",[t("strong",[a._v("The Buildah package provides a command-line tool that can be used to")])]),a._v(" "),t("p",[a._v("1.create a working container,   either from scratch or using an\nimage as a starting point")]),a._v(" "),t("p",[a._v("2.create an image, either from a working container or via the instructions in a Dockerfile")]),a._v(" "),t("p",[a._v("3.images can be built in either the OCI image format or the traditional upstream docker image format")]),a._v(" "),t("p",[a._v("4.delete a working container or an image")]),a._v(" "),t("p",[a._v("5.rename a local container")]),a._v(" "),t("p",[t("strong",[a._v("Installing buildah")])]),a._v(" "),t("p",[a._v("buildah is available in the CentOS repo. All we need to do is to run the following to install it:")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("# sudo apt-get install -y buildah\n")])])]),t("p",[a._v("After installation is done, we can check the version of the installed package")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("# buildah --version\nbuildah version 1.15.1 (image-spec 1.0.0, runtime-spec 1.0.0)\n")])])]),t("p",[a._v("after you do this, you also have to install runc")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("# sudo apt-get install -y runc\n")])])]),t("p",[a._v("*"),t("strong",[a._v("Using Dockerfile to create and run images")])]),a._v(" "),t("p",[t("img",{attrs:{src:"https://miro.medium.com/max/500/1*pbHLjdaeeflTR7Ksmdi9rQ.png",alt:"Stunning Features"}})]),a._v(" "),t("p",[a._v("I am going to use a previous Dockerfile that I have to build a test container image. The application is just a simple flask test application.")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('# ls\nDockerfile hello.py requirements.txt run.py\n# cat Dockerfile\nfrom python\nCOPY requirements.txt /app/requirements.txt\nCOPY main.py /app/main.py\nRUN pip install -r /app/requirements.txtCMD ["python","/app/main.py"]\n')])])]),t("p",[a._v("And running build-using-dockerfile, you’ll find a pretty similar output when using the docker build command")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("# buildah bud -t base_bud .\n")])])]),t("p",[a._v("Listing our images using buildah")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("# buildah images\nIMAGE NAME IMAGE TAG IMAGE ID CREATED AT SIZE\ndocker.io/library/python 2.7.10 4442f7b981c4 Dec 6, 2015 05:49 696 MB\nlocalhost/base_bud latest e3b4c7735762 May 27, 2019 22:47 703 MB\n")])])]),t("p",[a._v("Using podman (podman is a tool for managing pods, containers, and container images.), let’s try the newly created image")]),a._v(" "),t("p",[a._v("To install podman, you have to")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('# sudo apt-get install -y podman\n# podman run base_bud\n * Serving Flask app "hello" (lazy loading)\n * Environment: production\n WARNING: This is a development server. Do not use it in a production deployment.\n Use a production WSGI server instead.\n * Debug mode: on\n * Running on http://0.0.0.0:5000/ (Press CTRL+C to quit)\n * Restarting with stat\n * Debugger is active!\n * Debugger PIN: 437-588-275\n')])])]),t("p",[a._v("And listing our running container.")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("# podman ps\nCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES\n32597e3dd8c5 localhost/base_bud:latest python /app/hello... 2 minutes ago Up About a minute ago upbeat_mcnulty\n")])])]),t("p",[t("img",{attrs:{src:"https://miro.medium.com/max/700/1*WWl5sQISv1zWYFBVbtLa0Q.png",alt:"Stunning Features"}})]),a._v(" "),t("p",[a._v("Checking our app by going inside the container")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('# podman exec -it 32597e3dd8c5 /bin/sh\n# curl localhost:8080\n127.0.0.1 - - [17/Dec/2020 14:56:46] "GET / HTTP/1.1" 200 -\nHello World!\nThis is Alvis F#\n')])])]),t("p",[a._v("This post saw how simple (and identical to docker) it is to use buildah to create an OCI compliant container image.")])])}),[],!1,null,null,null);e.default=i.exports}}]);